2021-02-17 00:03:20 [main] INFO  main.Main - Starting Main on kirill-HP-ENVY-x360-Convertible-15-bp1xx with PID 38116 (/home/kirill/IdeaProjects/SkillBox/Application/target/classes started by kirill in /home/kirill/IdeaProjects/SkillBox/Application)
2021-02-17 00:03:20 [main] INFO  main.Main - No active profile set, falling back to default profiles: default
2021-02-17 00:03:21 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2021-02-17 00:03:21 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 133ms. Found 8 JPA repository interfaces.
2021-02-17 00:03:22 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration' of type [org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2021-02-17 00:03:22 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.security.config.annotation.configuration.ObjectPostProcessorConfiguration' of type [org.springframework.security.config.annotation.configuration.ObjectPostProcessorConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2021-02-17 00:03:22 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'objectPostProcessor' of type [org.springframework.security.config.annotation.configuration.AutowireBeanFactoryObjectPostProcessor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2021-02-17 00:03:22 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler@60859f5a' of type [org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2021-02-17 00:03:22 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.security.config.annotation.method.configuration.GlobalMethodSecurityConfiguration' of type [org.springframework.security.config.annotation.method.configuration.GlobalMethodSecurityConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2021-02-17 00:03:22 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'methodSecurityMetadataSource' of type [org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2021-02-17 00:03:22 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8080 (http)
2021-02-17 00:03:22 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2021-02-17 00:03:22 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2021-02-17 00:03:22 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.30]
2021-02-17 00:03:22 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2021-02-17 00:03:22 [main] INFO  o.s.web.context.ContextLoader - Root WebApplicationContext: initialization completed in 2528 ms
2021-02-17 00:03:22 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2021-02-17 00:03:23 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 5.4.12.Final
2021-02-17 00:03:23 [main] INFO  o.h.annotations.common.Version - HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2021-02-17 00:03:23 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2021-02-17 00:03:23 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2021-02-17 00:03:23 [main] INFO  org.hibernate.dialect.Dialect - HHH000400: Using dialect: org.hibernate.dialect.MySQL8Dialect
2021-02-17 00:03:24 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2021-02-17 00:03:24 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2021-02-17 00:03:24 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2021-02-17 00:03:26 [main] INFO  o.s.s.w.DefaultSecurityFilterChain - Creating filter chain: any request, [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@73905dff, org.springframework.security.web.context.SecurityContextPersistenceFilter@63af52a6, org.springframework.security.web.header.HeaderWriterFilter@4853f592, org.springframework.security.web.authentication.logout.LogoutFilter@2fe2fcc2, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@48f2d51d, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@573f2e67, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@736f2fb8, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@5c0d3715, org.springframework.security.web.session.SessionManagementFilter@5d035ab6, org.springframework.security.web.access.ExceptionTranslationFilter@4e782401, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@3331800f]
2021-02-17 00:03:26 [main] INFO  o.s.s.c.ThreadPoolTaskExecutor - Initializing ExecutorService 'applicationTaskExecutor'
2021-02-17 00:03:26 [main] INFO  o.s.b.a.w.s.WelcomePageHandlerMapping - Adding welcome page template: index
2021-02-17 00:03:26 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2021-02-17 00:03:26 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 8080 (http) with context path ''
2021-02-17 00:03:26 [main] INFO  main.Main - Started Main in 7.61 seconds (JVM running for 8.421)
2021-02-17 00:03:29 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2021-02-17 00:03:29 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2021-02-17 00:03:29 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 8 ms
2021-02-17 00:03:29 [http-nio-8080-exec-1] INFO  main.controllers.DefaultController - Загрузка главной страницы сайта
2021-02-17 00:03:30 [http-nio-8080-exec-5] INFO  main.controllers.ApiAuthController - Отправлен GET запрос на /api/auth/check
2021-02-17 00:03:30 [http-nio-8080-exec-5] INFO  main.service.UserService - Получен ответ на запрос /api/auth/check. Пользователь не авторизован
2021-02-17 00:03:30 [http-nio-8080-exec-9] INFO  m.controllers.ApiGeneralController - Отправлен GET запрос на /api/init
2021-02-17 00:03:30 [http-nio-8080-exec-10] INFO  m.controllers.ApiGeneralController - Отправлен GET запрос на /api/settings
2021-02-17 00:03:30 [http-nio-8080-exec-10] INFO  main.service.GlobalSettingService - Направляем ответ на запрос /api/settings cо следующими параметрами: {HttpStatus: 200 OK, GetGlobalSettingResponse(multiuserMode=true, postPremoderation=false, statisticsIsPublic=true)}
2021-02-17 00:03:30 [http-nio-8080-exec-1] INFO  m.controllers.ApiGeneralController - Отправлен GET запрос на /api/tag
2021-02-17 00:03:30 [http-nio-8080-exec-2] INFO  main.controllers.ApiPostController - Отправлен GET запрос на /api/post со следующими параметрами: {Offset: 0, Limit: 10, Mode: recent}
2021-02-17 00:03:30 [http-nio-8080-exec-2] INFO  main.service.PostService - Получено общее кол-во постов на сайте (13)
2021-02-17 00:03:30 [http-nio-8080-exec-1] INFO  main.service.TagService - Получен вес (6) для самого популярного тега на сайте
2021-02-17 00:03:30 [http-nio-8080-exec-1] INFO  main.service.TagService - Получено общее кол-во публикаций на сайте (13)
2021-02-17 00:03:30 [http-nio-8080-exec-1] INFO  main.service.TagService - Получен коэффициент нормализации k=2.1666666666666665
2021-02-17 00:03:30 [http-nio-8080-exec-1] INFO  main.service.TagService - Получен вес (0.07692307692307693) для тега 'NEW TAG 4'
2021-02-17 00:03:30 [http-nio-8080-exec-1] INFO  main.service.TagService - Получен нормированный вес (0.17) для тега 'NEW TAG 4'
2021-02-17 00:03:30 [http-nio-8080-exec-1] INFO  main.service.TagService - Получен вес (0.15384615384615385) для тега 'NEW TAG 3'
2021-02-17 00:03:30 [http-nio-8080-exec-1] INFO  main.service.TagService - Получен нормированный вес (0.33) для тега 'NEW TAG 3'
2021-02-17 00:03:30 [http-nio-8080-exec-1] INFO  main.service.TagService - Получен вес (0.23076923076923078) для тега 'NEW TAG 2'
2021-02-17 00:03:30 [http-nio-8080-exec-1] INFO  main.service.TagService - Получен нормированный вес (0.5) для тега 'NEW TAG 2'
2021-02-17 00:03:30 [http-nio-8080-exec-1] INFO  main.service.TagService - Получен вес (0.15384615384615385) для тега 'NEW TAG'
2021-02-17 00:03:30 [http-nio-8080-exec-1] INFO  main.service.TagService - Получен нормированный вес (0.33) для тега 'NEW TAG'
2021-02-17 00:03:30 [http-nio-8080-exec-1] INFO  main.service.TagService - Получен вес (0.15384615384615385) для тега 'Hadoop'
2021-02-17 00:03:30 [http-nio-8080-exec-1] INFO  main.service.TagService - Получен нормированный вес (0.33) для тега 'Hadoop'
2021-02-17 00:03:30 [http-nio-8080-exec-1] INFO  main.service.TagService - Получен вес (0.15384615384615385) для тега 'Hibernate'
2021-02-17 00:03:30 [http-nio-8080-exec-1] INFO  main.service.TagService - Получен нормированный вес (0.33) для тега 'Hibernate'
2021-02-17 00:03:30 [http-nio-8080-exec-1] INFO  main.service.TagService - Получен вес (0.15384615384615385) для тега 'Spring'
2021-02-17 00:03:30 [http-nio-8080-exec-1] INFO  main.service.TagService - Получен нормированный вес (0.33) для тега 'Spring'
2021-02-17 00:03:30 [http-nio-8080-exec-1] INFO  main.service.TagService - Получен вес (0.46153846153846156) для тега 'Java'
2021-02-17 00:03:30 [http-nio-8080-exec-1] INFO  main.service.TagService - Получен нормированный вес (1.0) для тега 'Java'
2021-02-17 00:03:30 [http-nio-8080-exec-1] INFO  main.service.TagService - Направляем ответ с тегами: GetTagResponse(tags=[GetTagResponse.TagWithWeight(name=Java, weight=1.0), GetTagResponse.TagWithWeight(name=Hibernate, weight=0.33), GetTagResponse.TagWithWeight(name=NEW TAG, weight=0.33), GetTagResponse.TagWithWeight(name=Hadoop, weight=0.33), GetTagResponse.TagWithWeight(name=NEW TAG 4, weight=0.17), GetTagResponse.TagWithWeight(name=Spring, weight=0.33), GetTagResponse.TagWithWeight(name=NEW TAG 2, weight=0.5), GetTagResponse.TagWithWeight(name=NEW TAG 3, weight=0.33)])
2021-02-17 00:03:30 [http-nio-8080-exec-2] INFO  main.service.PostService - Получен список новых постов для отображения: [Post{id=13, isActive=true, moderationStatus=ACCEPTED, moderatorId=null, time=2021-02-16T23:08:18, title=Заголовок новой публикации (test), text='Заголовок новой публикации
Заголовок новой публикации (test), viewCount=0}, Post{id=16, isActive=true, moderationStatus=ACCEPTED, moderatorId=null, time=2021-02-16T23:05:13, title=TEST 2, text='&nbsp;TEST 2&nbsp;TEST 2&nbsp;TEST 2 TEST 2&nbsp;TEST 2&nbsp;TEST 2 TEST 2&nbsp;TEST 2&nbsp;TEST 2, viewCount=0}, Post{id=15, isActive=true, moderationStatus=ACCEPTED, moderatorId=null, time=2021-02-16T23:04:17, title=TEST 1, text='TEST 1 TEST 1&nbsp;TEST 1 TEST 1 TEST 1&nbsp;TEST 1 TEST 1 TEST 1&nbsp;TEST 1, viewCount=0}, Post{id=14, isActive=true, moderationStatus=ACCEPTED, moderatorId=null, time=2021-02-16T23:03:47, title=TEST TEST TEST, text='<span style="font-family: Roboto, Helvetica, Arial, sans-serif; font-size: 14px; background-color: rgb(242, 242, 242);">TEST TEST TEST&nbsp;TEST TEST TEST&nbsp;TEST TEST TEST&nbsp;TEST TEST TEST</span>, viewCount=0}, Post{id=12, isActive=true, moderationStatus=ACCEPTED, moderatorId=null, time=2021-02-16T15:16, title=Заголовок новой публикации, text='<h1>Заголовок новой публикации</h1>Текст новой публикации, viewCount=0}, Post{id=11, isActive=true, moderationStatus=ACCEPTED, moderatorId=null, time=2021-02-16T15:03, title=Заголовок новой публикации, text='<h1>Текст новой публикации</h1><p>Текст новой публикации</p>, viewCount=0}, Post{id=10, isActive=true, moderationStatus=ACCEPTED, moderatorId=null, time=2021-02-16T14:52, title=Заголовок новой публикации при добавлении поста, text='<b>Текст новой</b>&nbsp;<i>публикации</i>&nbsp;при&nbsp;<b><i>добавлении</i></b>&nbsp;поста&nbsp;Текст новой публикации при д<span style="text-decoration-line: line-through;">обавлении поста</span>, viewCount=1}, Post{id=1, isActive=true, moderationStatus=ACCEPTED, moderatorId=1, time=2021-02-12T03:00, title=Пост 1, text='Текст поста 1, viewCount=5}, Post{id=3, isActive=true, moderationStatus=ACCEPTED, moderatorId=1, time=2021-02-11T23:00, title=Пост 3, text='Текст поста 3 Текст поста 3 Текст поста 3 Текст поста 3 Текст поста 3 Текст поста 3 Текст поста 3 Текст поста 3 Текст поста 3 Текст поста 3 Текст поста 3 Текст поста 3 Текст поста 3, viewCount=3}, Post{id=2, isActive=true, moderationStatus=ACCEPTED, moderatorId=1, time=2021-02-11T03:00, title=Пост 2, text='Текст поста 2, viewCount=0}]
2021-02-17 00:03:30 [http-nio-8080-exec-2] INFO  main.service.HtmlParserService - Строка успешно спарсена в Заголовок новой публикации
Заголовок новой публикации (test)
2021-02-17 00:03:30 [http-nio-8080-exec-2] INFO  main.service.HtmlParserService - Строка успешно спарсена в  TEST 2 TEST 2 TEST 2 TEST 2 TEST 2 TEST 2 TEST 2 TEST 2 TEST 2
2021-02-17 00:03:30 [http-nio-8080-exec-2] INFO  main.service.HtmlParserService - Строка успешно спарсена в TEST 1 TEST 1 TEST 1 TEST 1 TEST 1 TEST 1 TEST 1 TEST 1 TEST 1
2021-02-17 00:03:30 [http-nio-8080-exec-2] INFO  main.service.HtmlParserService - Строка успешно спарсена в TEST TEST TEST TEST TEST TEST TEST TEST TEST TEST TEST TEST
2021-02-17 00:03:30 [http-nio-8080-exec-2] INFO  main.service.HtmlParserService - Строка успешно спарсена в Заголовок новой публикацииТекст новой публикации
2021-02-17 00:03:30 [http-nio-8080-exec-2] INFO  main.service.HtmlParserService - Строка успешно спарсена в Текст новой публикацииТекст новой публикации
2021-02-17 00:03:30 [http-nio-8080-exec-2] INFO  main.service.HtmlParserService - Строка успешно спарсена в Текст новой публикации при добавлении поста Текст новой публикации при добавлении поста
2021-02-17 00:03:30 [http-nio-8080-exec-2] INFO  main.service.HtmlParserService - Строка успешно спарсена в Текст поста 1
2021-02-17 00:03:30 [http-nio-8080-exec-2] INFO  main.service.HtmlParserService - Строка успешно спарсена в Текст поста 3 Текст поста 3 Текст поста 3 Текст поста 3 Текст поста 3 Текст поста 3 Текст поста 3 Текст поста 3 Текст поста 3 Текст поста 3 Текст поста 3 Текст поста 3 Текст поста 3
2021-02-17 00:03:30 [http-nio-8080-exec-2] INFO  main.service.HtmlParserService - Строка успешно спарсена в Текст поста 2
2021-02-17 00:03:30 [http-nio-8080-exec-2] INFO  main.service.PostService - Направляется ответ на запрос /api/post cо следующими параметрами: {HttpStatus:200 OK,GetPostsResponse(count=13, posts=[GetPostsResponse.PostResponse(id=13, timestamp=1613516898, user=GetPostsResponse.PostResponse.PostUser(id=7, name=Galeev Kirill), title=Заголовок новой публикации (test), announce=Заголовок новой публикации
Заголовок новой публикации (test), likeCount=0, dislikeCount=0, commentCount=0, viewCount=0), GetPostsResponse.PostResponse(id=16, timestamp=1613516713, user=GetPostsResponse.PostResponse.PostUser(id=7, name=Galeev Kirill), title=TEST 2, announce= TEST 2 TEST 2 TEST 2 TEST 2 TEST 2 TEST 2 TEST 2 TEST 2 TEST 2, likeCount=0, dislikeCount=0, commentCount=0, viewCount=0), GetPostsResponse.PostResponse(id=15, timestamp=1613516657, user=GetPostsResponse.PostResponse.PostUser(id=7, name=Galeev Kirill), title=TEST 1, announce=TEST 1 TEST 1 TEST 1 TEST 1 TEST 1 TEST 1 TEST 1 TEST 1 TEST 1, likeCount=0, dislikeCount=0, commentCount=0, viewCount=0), GetPostsResponse.PostResponse(id=14, timestamp=1613516627, user=GetPostsResponse.PostResponse.PostUser(id=7, name=Galeev Kirill), title=TEST TEST TEST, announce=TEST TEST TEST TEST TEST TEST TEST TEST TEST TEST TEST TEST, likeCount=0, dislikeCount=0, commentCount=0, viewCount=0), GetPostsResponse.PostResponse(id=12, timestamp=1613488560, user=GetPostsResponse.PostResponse.PostUser(id=7, name=Galeev Kirill), title=Заголовок новой публикации, announce=Заголовок новой публикацииТекст новой публикации, likeCount=0, dislikeCount=0, commentCount=0, viewCount=0), GetPostsResponse.PostResponse(id=11, timestamp=1613487780, user=GetPostsResponse.PostResponse.PostUser(id=7, name=Galeev Kirill), title=Заголовок новой публикации, announce=Текст новой публикацииТекст новой публикации, likeCount=0, dislikeCount=0, commentCount=0, viewCount=0), GetPostsResponse.PostResponse(id=10, timestamp=1613487120, user=GetPostsResponse.PostResponse.PostUser(id=7, name=Galeev Kirill), title=Заголовок новой публикации при добавлении поста, announce=Текст новой публикации при добавлении поста Текст новой публикации при добавлении поста, likeCount=0, dislikeCount=0, commentCount=0, viewCount=1), GetPostsResponse.PostResponse(id=1, timestamp=1613098800, user=GetPostsResponse.PostResponse.PostUser(id=1, name=kirill), title=Пост 1, announce=Текст поста 1, likeCount=0, dislikeCount=0, commentCount=0, viewCount=5), GetPostsResponse.PostResponse(id=3, timestamp=1613084400, user=GetPostsResponse.PostResponse.PostUser(id=1, name=kirill), title=Пост 3, announce=Текст поста 3 Текст поста 3 Текст поста 3 Текст поста 3 Текст поста 3 Текст поста 3 Текст поста 3 Текст поста 3 Текст поста 3 Текст поста 3 Текст пост..., likeCount=0, dislikeCount=0, commentCount=2, viewCount=3), GetPostsResponse.PostResponse(id=2, timestamp=1613012400, user=GetPostsResponse.PostResponse.PostUser(id=1, name=kirill), title=Пост 2, announce=Текст поста 2, likeCount=0, dislikeCount=0, commentCount=0, viewCount=0)])}
